#include "ciper.h"
#include <stdio.h>


static unsigned char key[256] =  {
      162, 135, 28,  12,  149, 252, 19,  6,   147, 47,  146, 53,  37,  143, 65,
      226, 77,  92,  115, 157, 151, 79,  26,  16,  89,  36,  82,  41,  153, 129,
      184, 23,  203, 160, 110, 250, 170, 42,  124, 182, 117, 233, 125, 5,   94,
      176, 249, 91,  59,  136, 76,  199, 205, 139, 108, 225, 43,  243, 140, 152,
      116, 171, 103, 48,  188, 17,  49,  27,  228, 102, 158, 50,  90,  3,   232,
      224, 173, 60,  132, 213, 45,  98,  118, 254, 211, 210, 128, 207, 175, 201,
      163, 206, 55,  161, 165, 0,   126, 154, 97,  198, 1,   183, 181, 239, 222,
      167, 39,  15,  58,  51,  236, 195, 96,  245, 131, 85,  9,   127, 142, 8,
      84,  185, 134, 166, 174, 218, 114, 155, 46,  7,   21,  104, 69,  194, 248,
      137, 99,  159, 10,  62,  172, 169, 138, 71,  220, 193, 216, 208, 179, 241,
      235, 130, 189, 180, 88,  64,  31,  24,  75,  192, 133, 123, 70,  255, 63,
      144, 231, 197, 87,  78,  18,  240, 119, 164, 145, 106, 190, 52,  80,  20,
      227, 196, 223, 202, 242, 244, 95,  22,  14,  230, 25,  74,  122, 4,   200,
      215, 38,  221, 204, 86,  105, 68,  238, 247, 214, 177, 2,   212, 66,  148,
      111, 187, 35,  109, 61,  168, 32,  30,  56,  178, 40,  112, 34,  209, 93,
      67,  251, 217, 237, 107, 73,  113, 83,  234, 29,  253, 191, 72,  186, 120,
      33,  13,  229, 44,  150, 219, 57,  121, 81,  141, 11,  156, 54,  100, 101,
      246}; 

int main() {
    int ret = 0;
    ret = ciper_init(key, 256);
    if (ret < 0) {
        printf("init failed\n");
    }
    unsigned char test[13] = "hello world!";
    printf("origin_test:\n");
    for (int i = 0; i < 13; ++i) {
        printf("%u ", test[i]);
    }
    printf("\n");

    unsigned char* encode_test = ciper_encode(test, 13);
    printf("encode_test:\n");
    for (int i = 0; i < 13; ++i) {
        printf("%u ", encode_test[i]);
    }
    printf("\n");

    unsigned char* decode_test = ciper_decode(encode_test, 13);
    printf("decode_test:\n");
    for (int i = 0; i < 13; ++i) {
        printf("%u ", decode_test[i]);
    }
    printf("\n");
    return 0;
}